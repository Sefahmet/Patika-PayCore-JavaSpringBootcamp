-- Table Schemas
DROP TABLE IF EXISTS ticket;

DROP TABLE IF EXISTS service;

DROP TABLE IF EXISTS passenger;

DROP TABLE IF EXISTS railway;

DROP TABLE IF EXISTS station;

DROP TABLE IF EXISTS train;

CREATE TABLE station
(
    id      INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    province VARCHAR(250) NOT NULL
);

CREATE TABLE passenger
(
    id        INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    firstname VARCHAR(25)        NOT NULL,
    lastname  VARCHAR(25)        NOT NULL,
    gender    VARCHAR(10),
    age       INT DEFAULT 0,
    phone     VARCHAR (12),
    email     VARCHAR(25) UNIQUE NOT NULL
);


CREATE TABLE service
(
    id                     INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    railway_id             INT         NOT NULL,
    price                  INT DEFAULT 0,
    departure_date         DATE        NOT NULL,
    departure_time         TIME        Not NULL,
    train_id               INT DEFAULT 0,
    FOREIGN KEY (train_id) REFERENCES train (id),
    FOREIGN KEY (railway_id) REFERENCES railway (id)
);

CREATE TABLE railway
(
    id            INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    first_station INT NOT NULL,
    last_station  INT NOT NULL,
    all_station   VARCHAR(256),
    FOREIGN KEY (first_station) REFERENCES station (id),
    FOREIGN KEY (last_station) REFERENCES station (id)
);

CREATE TABLE ticket
(
    id           INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    passenger_id INT NOT NULL,
    service_id    INT NOT NULL,
    FOREIGN KEY (passenger_id) REFERENCES passenger (id),
    FOREIGN KEY (service_id) REFERENCES service (id)
);
CREATE TABLE train
(

    id           INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    capacity     INT NOT NULL,
    ready_for_usage VARCHAR (1) NOT NULL,
);

-- ////////////////////////////////////////////////////////////////////////////
--  Sample static test values
-- ////////////////////////////////////////////////////////////////////////////
-- If you want to keep your data, alternative 1
-- IF NOT EXISTS(SELECT * from airport where name='' and address='')
-- THEN
INSERT INTO station(province)
VALUES ('32 Evler'),
       ('Abalar'),
       ('Acısu'),
       ('Adliye'),
       ('Aksakal'),
       ('Alifuatpaşa'),
       ('Alpullu'),
       ('Altınşehir'),
       ('Arifiye'),
       ('Ayşebacı'),
       ('Ayvalı'),
       ('Ayvatlar'),
       ('Babaeski'),
       ('Bahçelievler'),
       ('Bahçedere'),
       ('Bahçıvanova'),
       ('Bahşayiş'),
       ('Balabanlı'),
       ('Bayırköy'),
       ('Bayramlı'),
       ('Bostancı'),
       ('Bozüyük'),
       ('Büyükderbent'),
       ('Cankurtaran'),
       ('Coşkunoğulları'),
       ('Çalıköy'),
       ('Çandır'),
       ('Çatalca'),
       ('Çayırdere'),
       ('Çerkezköy'),
       ('Çimento Fabrikası'),
       ('Çorlu'),
       ('Çukurhüseyin'),
       ('Deliklikaya'),
       ('Demirköprü'),
       ('Derince'),
       ('Diliskelesi'),
       ('Doğanca'),
       ('Doğançay'),
       ('Edirne Şehir'),
       ('Fenerbahçe'),
       ('Gebze'),
       ('Gökçeali'),
       ('Gökçedere'),
       ('Gökköy'),
       ('Gündoğan'),
       ('Hadımköy'),
       ('Halkalı'),
       ('Hayrettin'),
       ('Hereke'),
       ('Ispartakule'),
       ('İnceğiz'),
       ('Kabakça'),
       ('Kanarya'),
       ('Kapıkule'),
       ('Kaplıca'),
       ('Karaağaç'),
       ('Karaköy'),
       ('Karamesutlu'),
       ('Kavaklı'),
       ('Kayabeyli'),
       ('Kentparkı'),
       ('Kırcasalih'),
       ('Kırkikievler'),
       ('Kırkpınar'),
       ('Kızılpınar'),
       ('Kızıltoprak'),
       ('Kirazlıyayla'),
       ('Kocamustafapaşa (Samatya)'),
       ('Koruma'),
       ('Kumkapı'),
       ('Kurfallı'),
       ('Kurtköy'),
       ('Kuruçeşme'),
       ('Kuşcenneti'),
       ('Lüleburgaz'),
       ('Mandıra'),
       ('Maşukiye'),
       ('Mecidiyeköy'),
       ('Mekece'),
       ('Menekşe'),
       ('Mithatpaşa'),
       ('Muallimköy'),
       ('Muratlı'),
       ('Mustafakemalpaşa'),
       ('Müsellimköy'),
       ('Nacak'),
       ('Nadirli'),
       ('Nusrat'),
       ('Okçugöl'),
       ('Osmaneli'),
       ('Ovacık'),
       ('Ömerköy'),
       ('Ömerli'),
       ('Pamukova'),
       ('Pehlivanköy'),
       ('Pelitözü'),
       ('Pendik'),
       ('Pınar'),
       ('Sapanca'),
       ('Sarfaklar'),
       ('Sarıcaali'),
       ('Sarıçayır'),
       ('Sarılar'),
       ('Sarımeşe'),
       ('Sarmaşık'),
       ('Savaştepe'),
       ('Sazlımalkoç'),
       ('Seramik'),
       ('Seyitler'),
       ('Sığırcı'),
       ('Sinekli'),
       ('Soğucak'),
       ('Soğuksu'),
       ('Söğütçağın'),
       ('Söğütlüçeşme'),
       ('Susurluk'),
       ('Şerbettar'),
       ('Şekerli'),
       ('Şirinyalı'),
       ('Taşağıl'),
       ('Tavşancıl'),
       ('Tayyakadın'),
       ('Tepetarla'),
       ('Terminal'),
       ('Tütünçiftlik'),
       ('Uzunköprü'),
       ('Uzunkum'),
       ('Veliköy'),
       ('Velimeşe'),
       ('Vezirhan'),
       ('Yarımburgaz'),
       ('Yarımca (Körfez)'),
       ('Yayla'),
       ('Yedikule'),
       ('Yenidere'),
       ('Yenikapı'),
       ('Yeniköy'),
       ('Yulaflı'),
       ('Yüzevler');


-- If you want to keep your data, alternative 2
-- INSERT INTO airport (name, address)
-- SELECT 'SampleAirport',
--        'SampleAddress'
-- WHERE NOT EXISTS(
--         SELECT 1 FROM airport WHERE name = 'SampleAirport' AND address = 'SampleAddress'
--     );

-- If you want to keep your data, keep them on another data.sql file and rename this as schema.sql alternative 3

INSERT INTO railway(first_station, last_station, all_station)
VALUES  ( 65, 36, '65-31-9-26-24-65-30-81-24-84-132-6-122-3-41-24-62-43-35-13-73-28-52-85-36'),
        ( 25, 109, '25-39-95-24-89-16-5-7-106-75-76-5-131-67-53-73-79-99-55-81-127-9-99-124-109'),
        ( 0, 31, '1-25-90-26-68-46-55-126-137-117-78-50-120-135-95-14-104-99-50-13-106-69-86-15-31'),
        ( 71, 36, '71-18-137-14-21-13-32-115-126-15-108-45-96-100-66-42-118-33-40-86-79-44-71-4-36'),
        ( 67, 119, '67-116-98-49-18-2-35-97-133-106-90-135-98-58-75-9-54-123-126-130-74-38-56-47-119'),
        ( 81, 32, '81-75-50-16-31-46-32-132-9-94-119-112-44-19-58-6-107-91-86-124-11-116-28-116-32'),
        ( 46, 89, '46-59-12-62-62-76-48-41-57-75-135-42-60-63-76-55-3-15-95-124-20-52-125-8-89'),
        ( 90, 25, '90-69-13-104-136-9-2-58-45-70-59-64-93-28-13-27-17-59-38-71-106-24-75-112-25'),
        ( 29, 37, '29-118-22-131-58-107-64-40-33-61-11-8-137-63-99-85-102-1-113-77-57-101-77-19-37'),
        ( 53, 121, '53-65-59-8-103-132-117-62-21-81-132-59-17-54-77-106-21-81-96-31-106-48-134-128-121');


INSERT INTO passenger(firstname, lastname, gender, age, phone, email)
VALUES ('Ali', 'Tek', 'male', 27, '905554443322', 'ali@gmail.com'),
       ('Ceren', 'Telli', 'female', 26, '905554443322', 'ali2@gmail.com'),
       ('Dilek', 'Tutku', 'female', 14, '905554443322', 'ali3@gmail.com'),
       ('Cem', 'Saygın', 'male', 25, '905554443322', 'ali4@gmail.com'),
       ('Semih', 'Sanlı', 'male', 25, '905554443322', 'ali5@gmail.com'),
       ('Veli', 'Telli', 'female', 26, '905554443322', 'veli@hotmail.com'),
       ('Kamil', 'Tutku', 'female', 14, '905554443322', 'veli2@hotmail.com'),
       ('Sam', 'Caroline', 'male', 25, '905554443322', 'veli3@hotmail.com'),
       ('Jhonny', 'Deepy', 'male', 41, '905554443322', 'jhonny@gmail.com'),
       ('Fatih', 'Telli', 'female', 34, '905554443322', 'veli5@hotmail.com'),
       ('Semra', 'Kelebek', 'female', 44, '905554443322', 'veli6@hotmail.com'),
       ('Mustafa', 'Saygın', 'male', 12, '905554443322', 'musti@daddy.com'),
       ('Carl', 'Geenny', 'male', 27, '905554443322', 'veli10@hotmail.com');


INSERT INTO service( railway_id, departure_date, departure_time,train_id, price)
VALUES (1, '2022-03-01', '17:50:00', 3, 30),
       (1, '2022-03-02', '17:50:00', 4, 30),
       (2, '2022-03-02', '17:50:00', 1, 30),
       (3, '2022-03-03', '17:50:00', 2, 30),
       (4, '2022-03-05', '17:50:00', 3, 30),
       (5, '2022-03-06', '17:50:00', 4, 30),
       (6, '2022-03-07', '17:50:00', 1, 30),
       (7, '2022-03-08', '17:50:00', 2, 30),
       (6, '2022-03-09', '17:50:00', 3, 30),
       (10, '2022-03-10', '17:50:00', 4, 30),
       (9, '2022-03-11', '17:50:00', 1, 30),
       (8, '2022-03-12', '17:50:00', 2, 30);
INSERT INTO ticket(passenger_id, service_id)
VALUES (1, 10),
       (2, 10),
       (3, 2),
       (4, 1),
       (5, 4),
       (6, 8),
       (7, 9),
       (8, 10),
       (9, 9);

INSERT INTO train(capacity, ready_for_usage)
VALUES (500, '1'),
       (450, '1'),
       (400, '1'),
       (350, '1'),
